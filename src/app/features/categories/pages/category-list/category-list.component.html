<div class="card-container">

  <p-toast />

  <div class="table-header">
    <h2 class="page-title">Category Management</h2>
    <p-button label="New Category" icon="pi pi-plus" (onClick)="showDialog()"></p-button>
  </div>

  <p-table [value]="categories()" styleClass="p-datatable-striped">
    <ng-template pTemplate="header">
      <tr>
        <th>Name</th>
        <th>Color</th>
        <th>Actions</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-category>
      <tr>
        <td>{{ category.name }}</td>
        <td>
          <div class="color-cell-content">
            <span [style.backgroundColor]="category.color" class="color-indicator"></span>
            {{ category.color }}
          </div>
        </td>
        <td>
          <div class="action-buttons">
            <p-button icon="pi pi-pencil" [text]="true" severity="secondary"></p-button>
            <p-button icon="pi pi-trash" [text]="true" severity="danger"></p-button>
          </div>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="3" class="empty-message">
          No categories found. Click "New Category" to start.
        </td>
      </tr>
    </ng-template>
  </p-table>

  <p-dialog header="Create Category" [(visible)]="displayDialog" [modal]="true">

    <form [formGroup]="categoryForm" class="category-form">
      <div class="form-field">
        <label for="name">Name</label>
        <input pInputText id="name" formControlName="name" autocomplete="off" />
      </div>

      <div class="form-field">
        <label for="color">Theme Color</label>
        <p-colorPicker formControlName="color" appendTo="body" format="hex"></p-colorPicker>
      </div>
    </form>

    <ng-template pTemplate="footer">
      <p-button label="Cancel" [text]="true" severity="secondary" (onClick)="displayDialog.set(false)"></p-button>
      <p-button label="Save Category" icon="pi pi-check" (onClick)="saveCategory()"></p-button>
    </ng-template>
  </p-dialog>
</div>